{"version":3,"file":"react-tiny-fab.esm.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { useState } from 'react';\n\nimport './styles.scss';\n\ninterface ABProps extends React.HTMLAttributes<HTMLButtonElement> {\n  text?: string;\n  onClick?: (e: React.FormEvent) => void;\n  'data-testid'?: string;\n}\n\nconst AB: React.FC<ABProps> = ({ children, ...p }) => (\n  <button type=\"button\" {...p} className=\"rtf--ab\">\n    {children}\n  </button>\n);\n\ninterface MBProps extends Omit<React.HTMLAttributes<HTMLButtonElement>, 'tabIndex'> {\n  tabIndex?: number;\n}\n\nexport const MB: React.FC<MBProps> = ({ children, ...p }) => (\n  <button type=\"button\" className=\"rtf--mb\" {...p}>\n    {children}\n  </button>\n);\n\nconst defaultStyles: React.CSSProperties = { bottom: 24, right: 24 };\n\ninterface FabProps {\n  event?: 'hover' | 'click';\n  style?: React.CSSProperties;\n  alwaysShowTitle?: boolean;\n  icon?: React.ReactNode;\n  mainButtonStyles?: React.CSSProperties;\n  onClick?: (e: React.FormEvent) => void;\n  text?: string;\n  children?: React.ReactNode;\n}\n\nconst Fab: React.FC<FabProps> = ({\n  event = 'hover',\n  style = defaultStyles,\n  alwaysShowTitle = false,\n  children,\n  icon,\n  mainButtonStyles,\n  onClick,\n  text,\n  ...p\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const ariaHidden = alwaysShowTitle || !isOpen;\n  const interpolatedEvent = 'ontouchstart' in window ? 'click' : event;\n  const open = () => setIsOpen(true);\n  const close = () => setIsOpen(false);\n  const enter = () => interpolatedEvent === 'hover' && open();\n  const leave = () => interpolatedEvent === 'hover' && close();\n  const toggle = (e: React.FormEvent) => {\n    if (onClick) {\n      return onClick(e);\n    }\n    e.persist();\n    return interpolatedEvent === 'click' ? (isOpen ? close() : open()) : null;\n  };\n\n  const actionOnClick = (e: React.FormEvent, userFunc: (e: React.FormEvent) => void) => {\n    e.persist();\n    setIsOpen(false);\n    setTimeout(() => {\n      userFunc(e);\n    }, 1);\n  };\n\n  const rc = () =>\n    React.Children.map(children, (ch, i) => {\n      if (React.isValidElement<ABProps>(ch)) {\n        return (\n          <li className={`rtf--ab__c ${'top' in style ? 'top' : ''}`}>\n            {React.cloneElement(ch, {\n              'data-testid': `action-button-${i}`,\n              'aria-label': ch.props.text || `Menu button ${i + 1}`,\n              'aria-hidden': ariaHidden,\n              tabIndex: isOpen ? 0 : -1,\n              ...ch.props,\n              onClick: (e: React.FormEvent) => {\n                if (ch.props.onClick) actionOnClick(e, ch.props.onClick);\n              },\n            })}\n            {ch.props.text && (\n              <span\n                className={`${'right' in style ? 'right' : ''} ${\n                  alwaysShowTitle ? 'always-show' : ''\n                }`}\n                aria-hidden={ariaHidden}\n              >\n                {ch.props.text}\n              </span>\n            )}\n          </li>\n        );\n      }\n      return null;\n    });\n\n  return (\n    <ul\n      onMouseEnter={enter}\n      onMouseLeave={leave}\n      className={`rtf ${isOpen ? 'open' : 'closed'}`}\n      data-testid=\"fab\"\n      style={style}\n      {...p}\n    >\n      <li className=\"rtf--mb__c\">\n        <MB\n          onClick={toggle}\n          style={mainButtonStyles}\n          data-testid=\"main-button\"\n          role=\"button\"\n          aria-label=\"Floating menu\"\n          tabIndex={0}\n        >\n          {icon}\n        </MB>\n        {text && (\n          <span\n            className={`${'right' in style ? 'right' : ''} ${alwaysShowTitle ? 'always-show' : ''}`}\n            aria-hidden={ariaHidden}\n          >\n            {text}\n          </span>\n        )}\n        <ul>{rc()}</ul>\n      </li>\n    </ul>\n  );\n};\n\nexport { Fab, AB as Action };\n"],"names":["AB","children","p","React","type","className","MB","defaultStyles","bottom","right","Fab","event","style","alwaysShowTitle","icon","mainButtonStyles","onClick","text","useState","isOpen","setIsOpen","ariaHidden","interpolatedEvent","window","open","close","enter","leave","toggle","e","persist","actionOnClick","userFunc","setTimeout","rc","Children","map","ch","i","isValidElement","cloneElement","props","tabIndex","onMouseEnter","onMouseLeave","role"],"mappings":"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"}